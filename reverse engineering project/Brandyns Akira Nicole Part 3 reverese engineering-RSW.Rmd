---
title: "Data Notebook"
author: "Brandyn Fragosa, AKira Kyles and Nicole Ramos"
date: "2025-10-08"
output: html_document
---

###This R file will include a database that examines the rate of police shootings by both race and gender in America. The orginal database that this file in built on is from a Washington Post data that led to a 2020 article. We worked to recreate the same information in the article built off the same data. 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
options(scipen=999)
library(tidyverse)
library(janitor)
library(lubridate)
```

```{r}
fatal_police_shootings_data <- read_csv("fatal-police-shootings-data.csv") %>% 
  clean_names() %>% 
  mutate(date_new = ymd(date))
```
**Brandyn**
#For question 2, the article provides a data set totaling the number of Women and Men who have been fatally shot by police and had mental illness. They dont include people who identify as non-binary in this data set and they dont explain why, and the 20 people who's gender is N/A are those whos gender was missing in the police report. What I first did to filter my data was create a table that collected only the number of male and females shot by police since 2015, when the data set first starts, to september 4th, 2020, which is the day when the article was published. Since we are writing code to show how the authors got the numbers that they did, we had to base our code on when the article was published because the data set has dates now all the way to December 31st, 2024, and our numbers would be alot higher than what they were finding.

```{r}
# Q2. Number of fatal police shootings by gender since 2015 to 09/04/2020 (publication of the article.

shootings_by_gender <- fatal_police_shootings_data %>% 
  filter(date_new < "2020-09-04") %>% 
  filter(gender == "male" | gender == "female")%>% 
group_by(gender) %>%
summarise(count = n())
```

#Through filtering the code even further, we found that 83 women and 1,252 men classified as mentally ill and were shot by police since 2015. We think this is important because, as the Treatment Advocacy Center's Executive Director John Snook says, more men with mental illness are more likely to be fatally shot by police because they are seen more as a "threat." He further adds, "We have a bias against seeing women as dangerous or violent, and their illness may not present with violence in the same way a man's would." This would then explain why more men have been shot and killed by police than women.

```{r}
# Q2. Men and woman shot by police since 2015 who had mental illnesses.

Mental_illness_related_by_gender <- fatal_police_shootings_data %>% 
  filter(date_new < "2020-09-04") %>% 
  filter((str_detect(gender, "male")|str_detect(gender, "female"))&
  str_detect(was_mental_illness_related, "TRUE"))%>% 
group_by(gender) %>%
summarise(count = n())
```

#When calculating the percentage of men and women fatally shot by police and had mental illness, we found that women had a higher percentage with 33% and men with 23%. I'm assuming the reason why women who are fatally shot by police and have a mental illness have a higher percentage than men is because as mentioned in the previous comment, police oftenly view women to be "less violent," so when they deconstruct that belief, the likliehood of police reacting with force is higher, resulting in a higher fatalility rate.

#rsw comment: you could simplify this chunk. see my comments below

```{r}
# Q2. Percentage of men and woman shot by police since 2015 who had mental illnesses.

total_women_shot <- fatal_police_shootings_data %>% 
    filter(date_new < "2020-09-04") %>% 
    filter(str_detect(gender, "female")) %>% 
  group_by(gender) %>%
  summarise(total_women_shot = n())

women_with_mental_illness <- fatal_police_shootings_data %>% 
    filter(date_new < "2020-09-04") %>% 
    filter(
      str_detect(gender, "female"),
      str_detect(was_mental_illness_related, "TRUE"))%>% 
    group_by(gender) %>% 
    summarise(women_with_mental_illness = n ())

combined_total <- left_join(total_women_shot, women_with_mental_illness, by = "gender")
  
combined_total %>% 
  mutate(Pct_with_mental_illness = (women_with_mental_illness / total_women_shot) * 100)
```

More concise solution:
```{r}
fatal_police_shootings_data |> 
  filter(date_new < "2020-09-04", 
         str_detect(gender, "female"))|> 
  summarise(
    total_women_shot = n(),
    women_with_mental_illness = sum(was_mental_illness_related == TRUE, na.rm = TRUE),
    pct_with_mental_illness = (women_with_mental_illness / total_women_shot) * 100
  )
```


#rsw comment: you could simplify this as well
```{r}
total_men_shot <- fatal_police_shootings_data %>% 
    filter(date_new < "2020-09-04") %>% 
    filter(str_detect(gender, "male")) %>% 
  group_by(gender) %>%
  summarise(total_men_shot = n())

men_with_mental_illness <- fatal_police_shootings_data %>% 
    filter(date_new < "2020-09-04") %>% 
    filter(
      str_detect(gender, "male"),
      str_detect(was_mental_illness_related, "TRUE"))%>% 
    group_by(gender) %>% 
    summarise(men_with_mental_illness = n ())

combined_total <- left_join(total_men_shot, men_with_mental_illness, by = "gender")
  
combined_total %>% 
  mutate(Pct_with_mental_illness = (men_with_mental_illness / total_men_shot) * 100)
```

**Akira**

#rsw comment: I put a comment on the last version and it was not fixed here. You need to rename the race variables. What is "A"? I don't want to guess. What is "H"? Etc. Rename A as Asian B as Black H as Hispanic.

```{r}
fatal_police_shootings_data <- fatal_police_shootings_data|> 
  mutate(race = case_when(
    str_detect(race, "W") ~ "White",
        str_detect(race, "B") ~ "Black",
    str_detect(race, "A") ~ "Asian",
    str_detect(race, "H") ~ "Hispanic",
    str_detect(race, "O") ~ "Other",
    str_detect(race, "N") ~ "Native American",
        .default = NA)
  )
     
```
```{r}
#By race, 147 of the women killed were White, 48 Black and 29 Hispanic. Five were Native American, four were Asian and three were other races.

fatal_police_shootings_data |> 
  filter(date < "2020-09-01" &
           gender== "female") |> 
  group_by(race) |> 
  summarise(count=n()) 
```

##By percentages, men shot by police were less often White and more often Black or Hispanic. 

##My data shows this statement as false and it was actually the complete opposite and white men are actually shot more than than Black men by percentage.  

```{r}
fatal_police_shootings_data |> 
  filter(date < "2020-09-03" &
           gender== "male")|> 
  group_by(race) |> 
  summarise(count = n()) |> 
  mutate(percentage = (count / sum(count)) * 100)
```

```{r}
fatal_police_shootings_data |> 
  filter(date < "2020-09-03", gender == "male")  |> 
  count(race)  |> # count(race) automatically groups and summarizes - it's equivalent to group_by(race) %>% summarise(n = n()) 
  mutate(pct_men = (n / sum(n)) * 100)
```

#rsw comment:your results don't consider the binary nature of the statement: "By percentages, men shot by police were less often White and more often Black or Hispanic." If we calculated white as a binary variable, more people of color (53%) are shot. 
```{r}
fatal_police_shootings_data |> 
  filter(date < "2020-09-03", gender == "male")  |> 
  mutate(white_nonwhite = case_when(
    race =="W" ~ "white",
    .default = "nonwhite"
  )) |> 
  count(white_nonwhite)  |> 
  mutate(pct_men = (n / sum(n)) * 100)
  
```


#rsw comment: code fails because the deaths df was not created yet

### For both genders, a gun was the most common weapon. Of men killed, 57 percent were armed with a gun and of women, 44 percent.

```{r}
fatal_police_shootings_data |> 
  filter(date > "2020-09-03" &
           gender== "female" ) |>
  group_by(armed_with) |> 
  summarise(count = n()) |> 
  mutate(percentage = (count / sum(count)) * 100) |> 
  arrange(desc(percentage))
```
#rsw comment: code fails because the deaths df was not created yet
```{r}
fatal_police_shootings_data |> 
  filter(date > "2020-09-03" &
           gender== "male" ) |>
  group_by(armed_with) |> 
  summarise(count = n()) |> 
  mutate(percentage = (count / sum(count)) * 100) |> 
  arrange(desc(percentage))
```

###The data, although very slightly higher in percentage by minimal margins, those armed with guns is the highests for both genders. In the Washington Post data, 109 women were reported to be armed with a gun but I found 105 and my percentage increased by 4% compared to Washington Post results. The margins for the male data was much closer with 59% compared to the Washington Post's 57%

**Nicole**
### For 5A, I took the dataset and filtered for two factors: dates before Sept. 3, 2020 and female in the gender column. I grouped the newly filtered data by the column "armed_with," in order to see the counts of females by what weapons they were (or weren't) carrying when killed by police.

```{r}
#5A. Since 2015, police have killed 26 unarmed women, including Taylor.
fatal_police_shootings_data |>
  filter(date_new < "2020-09-03" & 
           gender== "female") |>
  group_by(armed_with) |>
  summarise(count = n())
```

### For 5B, I retained the two previous filters but added one more: unarmed in the "armed_with" column. I then grouped by race and summarized, so I could see the counts of unarmed women by race. 

### 5C's statement doesn't specify whether the Black and White women they are referring to are armed or unarmed. I ran code below, removing the unarmed column filter and grouping by race, to see if that data came from women generally. It did not appear so, as White women fatally shot by police would otherwise be about three times as many as Black women. 5C does appear true when referring to the unarmed female counts by race.

```{r}
#5B.Of those, 14 were White, seven were Black, four were Hispanic and oneâ€™s race was unknown.

#5C.While about twice as many White women were shot and killed as Black women...

fatal_police_shootings_data |>
  filter(date_new < "2020-09-03" & 
           gender== "female" &
           armed_with == "unarmed") |>
  group_by(race) |>
  summarise(count = n())
```

```{r}
#5C.The second statistic quoted above seems to refer to unarmed White women in comparison to unarmed Black women, because White women fatally shot by police would otherwise be about three times as many as Black women. 

fatal_police_shootings_data |>
  filter(date_new < "2020-09-03" & 
           gender== "female") |>
  group_by(race) |>
  summarise(count = n())
```

# 5D. White women account for five times the Black female population.

### Given that The Washington Post's GitHub does not contain any csv files for total U.S. population, the statistic could come from 2010 census data (https://www.census.gov/library/visualizations/interactive/race-and-ethnicity-in-the-united-state-2010-and-2020-census.html). In 2010, the population identifying as White alone was 61.6%, which is five times more than the population identifying as Black, 12.4%. These numbers, though, are not filtered out for specific gender.  

#rsw comment - for the final version, get that Census data and add it to your calculation